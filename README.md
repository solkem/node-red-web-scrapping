# node-red-web-scrapping

[{"id":"353ef70c.45b8b","type":"inject","z":"b1183a2b.b19d2","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":110,"y":55.5,"wires":[["b6159467.daa6f8"]]},{"id":"96d28734.684aa","type":"inject","z":"b1183a2b.b19d2","name":"Off","topic":"","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"x":128,"y":290.5,"wires":[["d79ffaf6.443e08","25ffa6fd.c6a492"]]},{"id":"dda2f7bf.98a39","type":"inject","z":"b1183a2b.b19d2","name":"25%","topic":"","payload":"25","payloadType":"str","repeat":"","crontab":"","once":false,"x":131,"y":345.5,"wires":[["d79ffaf6.443e08","25ffa6fd.c6a492"]]},{"id":"ad005814.2e8cd8","type":"inject","z":"b1183a2b.b19d2","name":"50%","topic":"","payload":"50","payloadType":"str","repeat":"","crontab":"","once":false,"x":136,"y":400.5,"wires":[["d79ffaf6.443e08","25ffa6fd.c6a492"]]},{"id":"ebadbe79.4f86e","type":"inject","z":"b1183a2b.b19d2","name":"75%","topic":"","payload":"75","payloadType":"str","repeat":"","crontab":"","once":false,"x":133,"y":470.5,"wires":[["d79ffaf6.443e08","25ffa6fd.c6a492"]]},{"id":"1621aa2a.a383d6","type":"inject","z":"b1183a2b.b19d2","name":"100%","topic":"","payload":"100","payloadType":"str","repeat":"","crontab":"","once":false,"x":135,"y":538.5,"wires":[["d79ffaf6.443e08","25ffa6fd.c6a492"]]},{"id":"d79ffaf6.443e08","type":"rpi-gpio out","z":"b1183a2b.b19d2","name":"PWM","pin":"16","set":"","level":"0","out":"pwm","x":350,"y":309,"wires":[]},{"id":"25ffa6fd.c6a492","type":"debug","z":"b1183a2b.b19d2","name":"","active":true,"console":"false","complete":"false","x":354,"y":387,"wires":[]},{"id":"b6159467.daa6f8","type":"function","z":"b1183a2b.b19d2","name":"Format date","func":"var date = new Date(msg.payload)\nmsg.payload=date.toString()\nreturn msg;","outputs":1,"noerr":0,"x":269,"y":26,"wires":[["ee0f1870.cf9ca"]]},{"id":"ee0f1870.cf9ca","type":"debug","z":"b1183a2b.b19d2","name":"","active":true,"console":"false","complete":"false","x":428,"y":85,"wires":[]},{"id":"c15228aa.33915","type":"function","z":"b1183a2b.b19d2","name":"UK Electricity","func":"if(~msg.payload.indexOf('<BR')){\n    var words = msg.payload.split(\"div\")[1].split(\"<BR\");\n    if(words.length>=3){\n        msg.payload={}\n        msg.payload.demand=parseInt(words[0].split(\":\")[1]);\n        msg.payload.frequency=parseFloat(words[2].split(\":\")[1]);\n        msg.payload.time=words[1].split(\">\")[1];\n        \n        msg2={};\n        msg2.payload=(msg.payload.frequency>=50)?true :false;\n        \n        return [msg,msg2];\n    }    \n}","outputs":"3","noerr":0,"x":301,"y":218.5,"wires":[["5701328c.d9bd94"],["2a3b2762.312038"],["c5994208.c3b68"]]},{"id":"570455a6.eb7aec","type":"inject","z":"b1183a2b.b19d2","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":120,"y":190.5,"wires":[["fdbcc049.d82b68"]]},{"id":"5701328c.d9bd94","type":"debug","z":"b1183a2b.b19d2","name":"","active":true,"console":"false","complete":"payload","x":461,"y":158,"wires":[]},{"id":"c5994208.c3b68","type":"twitter out","z":"b1183a2b.b19d2","twitter":"","name":"Tweet","x":462,"y":269,"wires":[]},{"id":"2a3b2762.312038","type":"debug","z":"b1183a2b.b19d2","name":"","active":true,"console":"false","complete":"payload","x":506,"y":217,"wires":[]},{"id":"fdbcc049.d82b68","type":"http request","z":"b1183a2b.b19d2","name":"","method":"GET","ret":"txt","url":"http://www.nationalgrid.com/ngrealtime/realtime/systemdata.aspx","tls":"","x":249,"y":140.5,"wires":[["c15228aa.33915"]]}]
